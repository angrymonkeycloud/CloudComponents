@namespace AngryMonkey.Cloud.Components

@inject CloudWeb2 cloudWeb

@if (CloudPage.Features.Contains(CloudPageFeatures.TextEditor))
{
    <script suppress-error="BL9992" src="https://cdn.tiny.cloud/1/f8trq6j2jvxse0u7va7inyvimycrrvdcxal44jh8smq4op5p/tinymce/5/tinymce.min.js" crossorigin="anonymous" defer=""></script>
}

@if (CloudPage.Features.Contains(CloudPageFeatures.Maps))
{
    <link href="https://atlas.microsoft.com/sdk/javascript/mapcontrol/2/atlas.min.css" rel="stylesheet" />
    <script suppress-error="BL9992" src="https://atlas.microsoft.com/sdk/javascript/mapcontrol/2/atlas.min.js" defer></script>
}

<script suppress-error="BL9992">var exports = {};</script>

@foreach (CloudBundle bundle in Bundles)
{
    <CloudBundle 
        Source="@bundle.Source"
        JQuery="@bundle.JQuery"
        MinOnRelease="bundle.MinOnRelease"
        Async="bundle.Async"
        Defer="bundle.Defer"
        AddOns="@bundle.AddOns" />
}

@code {
    [Parameter] public required CloudPage CloudPage { get; set; }

    private List<CloudBundle> Bundles
    {
        get
        {
            List<CloudBundle> bundles = new(cloudWeb.PageDefaults.Bundles);
            bundles.AddRange(CloudPage.Bundles);

            return bundles;
        }
    }
}